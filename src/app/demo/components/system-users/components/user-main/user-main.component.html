<div class="grid">
	<div class="col-12">
		<div class="card">
			<h5>User List</h5>
			<div class="p-fluid p-formgrid grid">
                
                <div class="field col-12 md:col-6">
                    <label htmlFor="state">Select Estate</label>
                    <div class="flex flex-wrap gap-2 filter_area">
                      <p-dropdown [options]="companies" [(ngModel)]="selectedCompany" placeholder="Select a Company"
                      (onChange)="onCompanyChange($event)">
                    </p-dropdown>
                    <button pButton type="button" label="Add New Employee" icon="pi pi-plus" (click)="addNewUser()"></button>
                    </div>
                  
                  </div>
				<p-table [value]="users">
					<ng-template pTemplate="header">
						<tr>
							<th>Username</th>
							<th>Email</th>
							<th>Role</th>
							<th>Status</th>
							<th>Actions</th>
						</tr>
					</ng-template>
					<ng-template pTemplate="body" let-user>
						<tr>
							<td>{{user.username}}</td>
							<td>{{user.email}}</td>
							<td>{{user.role}}</td>
							<td>{{user.status}}</td>
							<td class="flex flex-wrap gap-2">
								<button pButton icon="pi pi-eye" class="p-button-success" (click)="viewUser(user)"></button>
								<button pButton icon="pi pi-pencil" class="p-button-info" (click)="editUser(user)"></button>
								<button pButton icon="pi pi-trash" class="p-button-danger" (click)="deleteUser(user)"></button>
							</td>
						</tr>
					</ng-template>
				</p-table>

				<p-sidebar [(visible)]="displayUserSlider" position="right" [modal]="true">
					<ng-template pTemplate="header">
						<h5>{{editingUser ? 'Edit User' : 'Add New User'}}</h5>
					</ng-template>
					
					<div class="p-fluid p-formgrid grid">
						<div class="field col-12">
							<label for="username">Username:</label>
							<input pInputText id="username" [(ngModel)]="newUser.username" />
						</div>
						<div class="field col-12">
							<label for="email">Email:</label>
							<input pInputText id="email" [(ngModel)]="newUser.email" />
						</div>
						<div class="field col-12">
							<label for="role">Role:</label>
							<input pInputText id="role" [(ngModel)]="newUser.role" />
						</div>
						<div class="field col-12">
							<label for="status">Status:</label>
							<input pInputText id="status" [(ngModel)]="newUser.status" />
						</div>
						<div class="field col-12 flex flex-wrap gap-2 btn_panel">
							<button pButton type="button" label="Save" (click)="saveUser()"></button>
							<button pButton type="button" label="Cancel" class="p-button-danger" (click)="hideUserSlider()"></button>
						</div>
					</div>
				</p-sidebar>
			</div>
		</div>
	</div>
</div>
